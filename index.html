<!DOCTYPE html>
<html>
    <head>
        <title> PAINT </title>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=yes">
        <meta charset="utf-8">
        <link rel="stylesheet" href="style.css">
    </head>
    
    <body> 
        <div class="colorandwidth" style="position: absolute; left:10px; top:10px;  ">
            <div >
                 <span style="float: left; margin-right: 5px; font-size: 1.3em; font-weight: bolder"> COLOUR : &nbsp;&nbsp;</span>
                <input type="color" list id="color">&nbsp;&nbsp; 
                <div id="circle" style="float: left; margin-left: 20px; position: absolute; top: 12px; left: 190px "></div>
            </div>
           <div style="float: left">
               <span style="font-size: 1.23em; font-weight: bold"> BRUSH size : &nbsp;&nbsp;</span>
               <input type="range" min="2" max="32" value="2" class="slider" id="myRange" style="width:120px"> 
           </div>
            <br>     
            <br>
<!--            <div id="dd">7</div>-->
            <u><span id="using">PENCIL IN USE</span></u>
        </div>
        <div style="width:35px;height:34px;border: 1px solid red;position:absolute;top:100px;background:red; cursor: pointer;" id="pencil">
        <img src="pencil.png">
        </div>
        <div style="width: 35px; height: 34px; border: 1px solid red; position: absolute; top: 100px; left: 70px; cursor: pointer" id="eraser">
        <img src="eraser.png" >
        </div>
        <div style="width: 36px; height: 35px; border: 1px solid red; position: absolute; top: 100px; left: 132px; cursor: pointer" id="letter">
        <img src="letter.png" >
        </div>
        <div style="width: 32px; height: 32px; border: 1px solid white; position: absolute; top: 300px; cursor: pointer; padding: 4px 4px 4px 4px;" id="oval">
        <img src="circle.png" >
        </div>
        <input type="number" placeholder="RADIUS" id="draw_circle"  style="position: absolute; left: 98px; height:20px ; width: 70px; top: 302px; display: none" min="15" max="300" value="15" >
        <div style="width: 32px; height: 32px; border: 1px solid white; position: absolute; top: 350px; cursor: pointer; padding: 4px 4px 4px 4px;" id="line">
        <img src="drawing.png" >
        </div>
        
        
        
        
        <div id="text" style="width:250PX;  position: absolute; top: 150px;left:50px; border: 0px solid black; display: none;">
        <input type="number" min="8" max="64" value="8" style="width: 45px; height: 23px; float: left; margin-left: 40px" id="number">
        <select id="select" style="float: left; margin-left: 20px; width: 120px; height: 30px">
                <option value="Arial">Arial</option>
                <option value="Arial Black">Arial Black</option>
                <option value="Book Antiqua">Book Antiqua</option>
                <option value="Courier New">Courier New</option>
                <option value="Georgia">Georgia</option>
                <option value="Helvetica">Helvetica</option>
                <option value="Impact">Impact</option>
                <option value="initial">initial</option>
                <option value="Lucida Console">Lucida Console</option>
                <option value="Lucida Sans Unicode">Lucida Sans Unicode</option>
                <option value="Palatino Linotype">Palatino Linotype</option>
                <option value="Tahoma">Tahoma</option>
                <option value="Times New Roman">Times New Roman </option>
                <option value="Verdana">Verdana</option>
            </select>
            <br><br>
            <input type="text" placeholder="type your text here" id="text_input" style="width: 230px; height: 25px; margin: 1px auto;">
            <br>
           <SPAN style="font-size:0.7em; ">CLICK ON DRAWING AREA TO DISPLAY TEXT </SPAN>
        
        </div>
        <br><br><br><br>
        
        <div id="canvasarea" style="height:500px;width: 940px; border: 4px dotted black; cursor: crosshair; background: white;
            margin: 10px; margin-left: 300px;"> 
                   <!-- h:500px w:900px-->
        <canvas id="canvas"  width="940px" height="500px"></canvas>
        </div>
        <button id="reset"> CLEAR ALL </button>
        <button id="undo"> UNDO </button>
    
        
        
    <script>
        var line=1;
        var src = [];
        var c1 = -1;
        var j = 0;
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var container = document.getElementById("canvasarea");
        var mouse = {x: 0, y: 0};//mouse_position
        var paint = false;
        var mode = "paint"; var mode_e = "paint";
        ctx.lineWidth = 2;
        ctx.lineJoin = "round";
        ctx.lineCap = "round";
        
        document.getElementById("color").onchange=function(){
//            window.alert(document.getElementById("color").value);
        document.getElementById("circle").style.background = document.getElementById("color").value;   
        };
        var slider = document.getElementById("myRange");
//        var output = document.getElementById("dd");
//        output.innerHTML = slider.value;
        slider.oninput = function() {
//        output.innerHTML = this.value;
        var c = 13 - (this.value/2);
        document.getElementById("circle").style.width=this.value+"px"; 
        document.getElementById("circle").style.height=this.value+"px"; 
        document.getElementById("circle").style.top=c+"px"; 
        ctx.lineWidth = this.value;
        line=1;    
        }
        var p=1;
        var x; var y;
        container.addEventListener("mousedown", function(e){//click inside canvasarea
        paint=true;
        mouse.x = e.pageX - this.offsetLeft;
        mouse.y = e.pageY - this.offsetTop;
        if(mode == "paint" || mode == "erase"){
        ctx.beginPath();// added++    
        ctx.moveTo(mouse.x, mouse.y);//added++    
        src[c1++] = canvas.toDataURL();
        j=0;    
        ctx.lineTo(mouse.x, mouse.y);
        ctx.stroke();}
        else if(mode == "text"){
             var txt = document.getElementById("text_input").value;
             var num = document.getElementById("number").value;
             var sty = document.getElementById("select").value;
             ctx.font = num+"px "+ sty;
             ctx.fillStyle = document.getElementById("color").value;
             src[c1++] = canvas.toDataURL();
             j=0;
             ctx.fillText(txt, mouse.x, mouse.y);
        }
        else if(mode == "line"){
             src[c1++] = canvas.toDataURL();
             j=0;
             if(line == 1){ 
             ctx.beginPath();
             ctx.moveTo(x, y);     
             line=2;
             }
             ctx.lineWidth = slider.value;
             ctx.strokeStyle = document.getElementById("color").value;
             ctx.lineTo(mouse.x, mouse.y);
             ctx.stroke();
             ctx.moveTo(mouse.x, mouse.y);
             x=mouse.x;
             y= mouse.y;
        }  
        else if(mode == "circle"){
            src[c1++] = canvas.toDataURL();
            j=0;
            var r=document.getElementById("draw_circle").value;
            ctx.lineWidth = slider.value;
            ctx.strokeStyle = document.getElementById("color").value;
            ctx.beginPath();
            ctx.arc(mouse.x,mouse.y,r,0,2*Math.PI);
            ctx.stroke();
            
        }
            
        } );
        container.addEventListener("mousemove", function(e){//move the mouse while holding mouse key
        mouse.x = e.pageX - this.offsetLeft;
        mouse.y = e.pageY - this.offsetTop;
        if(paint == true && p==1){
            if(mode == "paint"){   
                ctx.strokeStyle = document.getElementById("color").value;
                ctx.lineTo(mouse.x, mouse.y);
                ctx.stroke();
            }else if(mode == "erase"){
                ctx.strokeStyle = "white";
                ctx.lineTo(mouse.x, mouse.y);
                ctx.stroke();
            }
        }        
    });
    container.addEventListener("mouseup",function(){
        //mouse up->we are not drawing or erasing anymore
        paint = false;
    });
        
            
    document.getElementById("reset").onclick = function(){
             ctx.clearRect(0, 0, canvas.width, canvas.height);
             c1=-1;
             line=1;
    };
    document.getElementById("undo").onclick = function(){
              if(c1 - 2 >= -2){
//              window.alert("holla");
              ctx.clearRect(0, 0, canvas.width, canvas.height); 
              var img = new Image();
              img.onload = function(){
              ctx.drawImage(img, 0, 0);   
              }
              if(j == 0){
              img.src = src[c1-1];}
              c1 = c1 - 1;
              }
        line=1;
    }; 
    document.getElementById("letter").onclick = function(){
        if(mode != "text"){
            mode = "text";
            document.getElementById("draw_circle").style.display="none";
            document.getElementById("oval").style.backgroundColor="";
            document.getElementById("pencil").style.backgroundColor="";
            document.getElementById("eraser").style.backgroundColor="";
            document.getElementById("letter").style.backgroundColor="red";
            document.getElementById("line").style.backgroundColor="";
            document.getElementById("text").style.display="block";
            document.getElementById("using").innerHTML="TEXT IN USE";
        }
        else{
            mode = "";
            document.getElementById("draw_circle").style.display="none";
            document.getElementById("oval").style.backgroundColor="";
            document.getElementById("pencil").style.backgroundColor="";
            document.getElementById("eraser").style.backgroundColor="";
            document.getElementById("letter").style.backgroundColor="";
            document.getElementById("line").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("using").innerHTML="SELECT A DRAWING TOOL";
            }   
    };        
    document.getElementById("line").onclick = function(){
        if(mode != "line"){
            mode = "line";
            line =1;
            document.getElementById("draw_circle").style.display="none";
            document.getElementById("oval").style.backgroundColor="";
            document.getElementById("pencil").style.backgroundColor="";
            document.getElementById("eraser").style.backgroundColor="";
            document.getElementById("letter").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("line").style.backgroundColor="white";
            document.getElementById("using").innerHTML="LINE IN USE";
        }
        else{
            mode = "";
            document.getElementById("draw_circle").style.display="none";
            document.getElementById("oval").style.backgroundColor="";
            document.getElementById("pencil").style.backgroundColor="";
            document.getElementById("eraser").style.backgroundColor="";
            document.getElementById("letter").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("line").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("using").innerHTML="SELECT A DRAWING TOOL";
            }   
    };
    document.getElementById("eraser").onclick = function(){
        if(mode != "erase")
            {
                document.getElementById("eraser").style.backgroundColor="red";
                document.getElementById("draw_circle").style.display="none";
                document.getElementById("line").style.backgroundColor="";
                document.getElementById("pencil").style.backgroundColor="";
                document.getElementById("letter").style.backgroundColor="";
                document.getElementById("oval").style.backgroundColor="";
                document.getElementById("text").style.display="none";
                document.getElementById("using").innerHTML="ERASER IN USE";
                mode = "erase";
                p=1;
            }
        else{
                document.getElementById("eraser").style.backgroundColor="";
                mode = "";
                paint = false;
                document.getElementById("using").innerHTML="SELECT A DRAWING TOOL";
                p= -1;
        }
    }; 
        document.getElementById("pencil").onclick = function(){
        if(mode == "paint")
            {
                document.getElementById("pencil").style.backgroundColor="";
                mode = "";
                paint = false;
                p= -1;
                document.getElementById("using").innerHTML="SELECT A DRAWING TOOL";
            }
        else{
                document.getElementById("draw_circle").style.display="none";
                document.getElementById("pencil").style.backgroundColor="red";
                document.getElementById("eraser").style.backgroundColor="";
                document.getElementById("letter").style.backgroundColor="";
                document.getElementById("oval").style.backgroundColor="";
                document.getElementById("line").style.backgroundColor="";
                document.getElementById("text").style.display="none";
                mode = "paint";
                p=1;
                document.getElementById("using").innerHTML="PENCIL IN USE";
            }
    };
    document.getElementById("oval").onclick = function(){
        if(mode != "circle"){
            mode = "circle";
            line =1;
            document.getElementById("draw_circle").style.display="block";
            document.getElementById("pencil").style.backgroundColor="";
            document.getElementById("eraser").style.backgroundColor="";
            document.getElementById("letter").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("line").style.backgroundColor="";
            document.getElementById("oval").style.backgroundColor="white";
            document.getElementById("using").innerHTML="CIRCLE IN USE";
        }
        else{
            mode = "";
            document.getElementById("draw_circle").style.display="none";
            document.getElementById("pencil").style.backgroundColor="";
            document.getElementById("eraser").style.backgroundColor="";
            document.getElementById("letter").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("line").style.backgroundColor="";
            document.getElementById("oval").style.backgroundColor="";
            document.getElementById("text").style.display="none";
            document.getElementById("using").innerHTML="SELECT A DRAWING TOOL";
            }   
    };
    </script>
    </body>
</html>
        